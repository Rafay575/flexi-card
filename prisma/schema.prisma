// Prisma schema for Flexi ID - Employee Card Generation System

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id           String   @id @default(cuid())
  email        String   @unique
  password     String
  name         String
  role         String   @default("admin")
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Employee {
  id              String    @id @default(cuid())
  employeeId      String    @unique  // e.g., "0001", "8009654"
  firstName       String
  lastName        String
  designation     String    // e.g., "GRAPHIC DESIGNER"
  department      String    // e.g., "Product"
  city            String
  contactNumber   String    // Primary contact for front of card
  mobileNumber    String    // Mobile for back of card
  cnic            String    // National ID
  bloodGroup      String    // e.g., "B-", "O+", "A+"
  emergencyContact String
  dateOfBirth     DateTime
  dateOfJoining   DateTime
  photoPath       String?   // Path to employee photo
  isActive        Boolean   @default(true)
  cardGenerated   Boolean   @default(false)
  cardFrontPath   String?   // Path to generated front card
  cardBackPath    String?   // Path to generated back card
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Template {
  id              String   @id @default(cuid())
  name            String
  type            String   // "front" or "back"
  imagePath       String   // Path to template image
  isActive        Boolean  @default(true)
  // Field positioning configuration (JSON stored as string)
  fieldConfig     String   @default("{}")
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Settings {
  id              String   @id @default(cuid())
  key             String   @unique
  value           String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}
